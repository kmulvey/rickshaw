<!doctype>
<head>
	<link type="text/css" rel="stylesheet" href="http://code.jquery.com/ui/1.8.23/themes/base/jquery-ui.css">
	<link type="text/css" rel="stylesheet" href="../src/css/graph.css">
	<link type="text/css" rel="stylesheet" href="../src/css/detail.css">
	<link type="text/css" rel="stylesheet" href="../src/css/legend.css">
	<link type="text/css" rel="stylesheet" href="css/lines.css">
	<link type="text/css" rel="stylesheet" href="../src/css/bootstrap.min.css">
	<link type="text/css" rel="stylesheet" href="../src/css/bootstrap-responsive.min.css">
	<link type="text/css" rel="stylesheet" href="../src/css/technicals.css">

	<script src="../vendor/d3.min.js"></script>
	<script src="../vendor/d3.layout.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js"></script>

	<script src="../rickshaw.js"></script>
	<script src="../src/js/Rickshaw.Graph.Technicals.js"></script>
</head>
<body>
	<div id="technical_form">
		<form>
			<fieldset>
				<label for="period">Period</label>
				<input name="period" id="tech_period" />
				<label for="datum">Datum</label>
				<select name="datum"></select>
				<button class="btn">Submit</button>
			</fieldset>
		</form>
	</div>
	<div id="legend_container">
		<div id="smoother" title="Smoothing"></div>
		<div id="legend"></div>
	</div>
	<div id="chart_container">
		<div id="chart"></div>

		<div id="slider"></div>
	</div>

<script>

// set up our data series with 50 random data points

var seriesData = [ [], [], [] ];
var random = new Rickshaw.Fixtures.RandomData(150);

for (var i = 0; i < 150; i++) {
	random.addData(seriesData);
}

// instantiate our graph!

var graph = new Rickshaw.Graph( {
	element: document.getElementById("chart"),
	width: 960,
	height: 500,
	renderer: 'line',
	series: [
		{
			color: "#c05020",
			data: seriesData[0],
			name: 'New York'
		}, {
			color: "#30c020",
			data: seriesData[1],
			name: 'London'
		}, {
			color: "#6060c0",
			data: seriesData[2],
			name: 'Tokyo'
		}
	]
} );

graph.render();

var hoverDetail = new Rickshaw.Graph.HoverDetail( {
	graph: graph
} );

var legend = new Rickshaw.Graph.Legend( {
	graph: graph,
	element: document.getElementById('legend')

} );

var shelving = new Rickshaw.Graph.Behavior.Series.Toggle( {
	graph: graph,
	legend: legend
} );

var axes = new Rickshaw.Graph.Axis.Time( {
	graph: graph
} );
axes.render();

$(document).ready(function(e){
	var markup;
	for(var i = 0; i<graph.series.length; i++){
		markup += "<option value='" + i + "'>" + graph.series[i].name + "</option>";
	}
	$('#technical_form form select').html(markup);
	$('#technical_form form button').on('click', function(e){
		e.preventDefault();
		var f_stochastic = new Rickshaw.Graph.Technicals.f_stochastic({
			graph: graph,
			datum: $('#technical_form form select option:selected').val(),
			period: $('#technical_form form input[name=period]').val()
		});
	});
});
</script>

</body>
